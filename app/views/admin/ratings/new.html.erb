<% content_for :title, "Noter le candidat - Admin OLAK" %>

<div class="max-w-4xl mx-auto px-4 py-8">
  <!-- Breadcrumb -->
  <nav class="mb-6" aria-label="Breadcrumb">
    <ol class="flex items-center space-x-2 text-sm">
      <li><%= link_to "Admin", admin_root_path, class: "text-gray-500 hover:text-olak-primary transition-colors" %></li>
      <li><span class="text-gray-400">/</span></li>
      <li><%= link_to "Applications", admin_applications_path, class: "text-gray-500 hover:text-olak-primary transition-colors" %></li>
      <li><span class="text-gray-400">/</span></li>
      <li><span class="text-olak-primary font-semibold">Noter le candidat</span></li>
    </ol>
  </nav>

  <!-- Page Title -->
  <h1 class="text-4xl font-bold text-olak-primary-dark mb-8">Noter le candidat</h1>

  <!-- Application Info Alert -->
  <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg mb-6">
    <div class="flex items-center">
      <svg class="w-6 h-6 text-blue-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
      </svg>
      <div>
        <p class="text-blue-800 font-semibold">Candidature #12345</p>
        <p class="text-blue-700 text-sm mt-1">La notation déclenchera automatiquement une proposition au propriétaire.</p>
      </div>
    </div>
  </div>

  <!-- Candidate Info Card -->
  <div class="card-olak mb-6">
    <div class="flex justify-between items-start mb-4">
      <h2 class="text-2xl font-semibold text-olak-dark">Informations du candidat</h2>
      <span class="badge badge-pending">Documents validés</span>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <p class="text-sm text-gray-600 mb-1">Nom complet</p>
        <p class="font-semibold text-olak-dark">Marie Dupont</p>
      </div>
      <div>
        <p class="text-sm text-gray-600 mb-1">Email</p>
        <p class="font-semibold text-olak-dark">marie.dupont@example.olak.fr</p>
      </div>
      <div>
        <p class="text-sm text-gray-600 mb-1">Téléphone</p>
        <p class="font-semibold text-olak-dark">06 98 76 54 32</p>
      </div>
      <div>
        <p class="text-sm text-gray-600 mb-1">Statut professionnel</p>
        <p class="font-semibold text-olak-dark">CDI</p>
      </div>
      <div>
        <p class="text-sm text-gray-600 mb-1">Salaire mensuel net</p>
        <p class="font-semibold text-olak-primary">2 800 €</p>
      </div>
      <div>
        <p class="text-sm text-gray-600 mb-1">Type de garantie</p>
        <p class="font-semibold text-olak-dark">Garantie Visale</p>
      </div>
    </div>
  </div>

  <!-- Property Info Card -->
  <div class="card-olak mb-6">
    <h2 class="text-2xl font-semibold text-olak-dark mb-4">Bien concerné</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <p class="text-sm text-gray-600 mb-1">Type de bien</p>
        <p class="font-semibold text-olak-dark">Appartement T3</p>
      </div>
      <div>
        <p class="text-sm text-gray-600 mb-1">Localisation</p>
        <p class="font-semibold text-olak-dark">Paris 15ème</p>
      </div>
      <div>
        <p class="text-sm text-gray-600 mb-1">Adresse</p>
        <p class="font-semibold text-olak-dark">45 Avenue des Champs-Élysées</p>
      </div>
      <div>
        <p class="text-sm text-gray-600 mb-1">Loyer mensuel</p>
        <p class="font-semibold text-olak-primary">1 200 € + 150 € charges</p>
      </div>
    </div>
  </div>

  <!-- Rating Form -->
  <div class="card-olak">
    <h2 class="text-2xl font-semibold text-olak-dark mb-6">Évaluation multidimensionnelle</h2>
    
    <form action="#" method="post" class="space-y-6">
      <!-- Salary/Rent Ratio -->
      <div>
        <label class="block text-sm font-semibold mb-3 text-olak-dark">
          Ratio Salaire/Loyer <span class="text-olak-error">*</span>
        </label>
        <div class="flex items-center gap-1">
          <% 5.times do |i| %>
            <input type="radio" name="salary_ratio" value="<%= i + 1 %>" class="hidden peer/<%= i + 1 %>" id="salary_<%= i + 1 %>">
            <label for="salary_<%= i + 1 %>" class="cursor-pointer">
              <svg class="w-8 h-8 text-gray-300 hover:text-yellow-400 peer-checked/<%=i+1%>:text-yellow-400 transition-colors" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
            </label>
          <% end %>
        </div>
        <p class="text-xs text-gray-500 mt-1">Le salaire couvre-t-il suffisamment le loyer ?</p>
      </div>

      <!-- Contract Type -->
      <div>
        <label class="block text-sm font-semibold mb-3 text-olak-dark">
          Type de contrat <span class="text-olak-error">*</span>
        </label>
        <div class="flex items-center gap-1">
          <% 5.times do |i| %>
            <input type="radio" name="contract_type" value="<%= i + 1 %>" class="hidden peer/c<%= i + 1 %>" id="contract_<%= i + 1 %>">
            <label for="contract_<%= i + 1 %>" class="cursor-pointer">
              <svg class="w-8 h-8 text-gray-300 hover:text-yellow-400 peer-checked/c<%=i+1%>:text-yellow-400 transition-colors" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
            </label>
          <% end %>
        </div>
        <p class="text-xs text-gray-500 mt-1">Stabilité du contrat de travail (CDI, CDD, etc.)</p>
      </div>

      <!-- Guarantors -->
      <div>
        <label class="block text-sm font-semibold mb-3 text-olak-dark">
          Garanties <span class="text-olak-error">*</span>
        </label>
        <div class="flex items-center gap-1">
          <% 5.times do |i| %>
            <input type="radio" name="guarantors" value="<%= i + 1 %>" class="hidden peer/g<%= i + 1 %>" id="guarantor_<%= i + 1 %>">
            <label for="guarantor_<%= i + 1 %>" class="cursor-pointer">
              <svg class="w-8 h-8 text-gray-300 hover:text-yellow-400 peer-checked/g<%=i+1%>:text-yellow-400 transition-colors" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
            </label>
          <% end %>
        </div>
        <p class="text-xs text-gray-500 mt-1">Qualité des garanties (Visale, garant physique, etc.)</p>
      </div>

      <!-- Contract Duration -->
      <div>
        <label class="block text-sm font-semibold mb-3 text-olak-dark">
          Durée de location souhaitée <span class="text-olak-error">*</span>
        </label>
        <div class="flex items-center gap-1">
          <% 5.times do |i| %>
            <input type="radio" name="duration" value="<%= i + 1 %>" class="hidden peer/d<%= i + 1 %>" id="duration_<%= i + 1 %>">
            <label for="duration_<%= i + 1 %>" class="cursor-pointer">
              <svg class="w-8 h-8 text-gray-300 hover:text-yellow-400 peer-checked/d<%=i+1%>:text-yellow-400 transition-colors" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
            </label>
          <% end %>
        </div>
        <p class="text-xs text-gray-500 mt-1">Engagement de durée (court, moyen ou long terme)</p>
      </div>

      <!-- Agent Feeling -->
      <div>
        <label class="block text-sm font-semibold mb-3 text-olak-dark">
          Ressenti de l'agent <span class="text-olak-error">*</span>
        </label>
        <div class="flex items-center gap-1">
          <% 5.times do |i| %>
            <input type="radio" name="agent_feeling" value="<%= i + 1 %>" class="hidden peer/a<%= i + 1 %>" id="feeling_<%= i + 1 %>">
            <label for="feeling_<%= i + 1 %>" class="cursor-pointer">
              <svg class="w-8 h-8 text-gray-300 hover:text-yellow-400 peer-checked/a<%=i+1%>:text-yellow-400 transition-colors" fill="currentColor" viewBox="0 0 20 20">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
            </label>
          <% end %>
        </div>
        <p class="text-xs text-gray-500 mt-1">Votre impression générale sur le candidat</p>
      </div>

      <!-- Overall Score Display -->
      <div class="border-t pt-6 mt-6">
        <div class="bg-olak-gray p-4 rounded-lg">
          <div class="flex items-center justify-between">
            <span class="text-lg font-bold text-olak-dark">Note globale</span>
            <span class="text-3xl font-bold text-olak-primary">—/5</span>
          </div>
          <p class="text-xs text-gray-600 mt-2">La note sera calculée automatiquement sur la base de vos évaluations</p>
        </div>
      </div>

      <!-- Notes -->
      <div>
        <label class="block text-sm font-semibold mb-2 text-olak-dark">
          Notes et commentaires
        </label>
        <textarea class="input-olak" rows="4" placeholder="Ajoutez vos observations sur le candidat..."></textarea>
        <p class="text-xs text-gray-500 mt-1">Ces notes seront visibles par le propriétaire</p>
      </div>

      <!-- Actions -->
      <div class="flex gap-3 pt-4">
        <%= link_to "Annuler", admin_applications_path, class: "btn-secondary flex-1 text-center" %>
        <button type="submit" class="btn-primary flex-1">
          Enregistrer et proposer au propriétaire
        </button>
      </div>
    </form>
  </div>
</div>