<% content_for :title, "Mon CV Locatif - OLAK" %>

<div class="min-h-screen bg-olak-gray py-8">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <!-- Page Header -->
    <div class="mb-8">
      <h1 class="text-4xl font-bold text-olak-primary-dark mb-2">Mon CV Locatif</h1>
      <p class="text-gray-600">Présentez votre profil professionnel aux propriétaires</p>
    </div>

    <!-- Document Completion Status -->
    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
      <div class="flex items-center justify-between mb-4">
        <h2 class="text-2xl font-semibold text-olak-dark">Complétude du profil</h2>
        <span class="text-2xl font-bold text-olak-primary">85%</span>
      </div>
      
      <div class="w-full bg-gray-200 rounded-full h-4 mb-4">
        <div class="bg-olak-primary h-4 rounded-full transition-all" style="width: 85%"></div>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
          </svg>
          <span class="text-olak-dark">Informations personnelles</span>
        </div>
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
          </svg>
          <span class="text-olak-dark">Pièce d'identité</span>
        </div>
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
          </svg>
          <span class="text-olak-dark">Contrat de travail</span>
        </div>
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
          </svg>
          <span class="text-olak-dark">3 derniers bulletins de salaire</span>
        </div>
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-olak-warning" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
          </svg>
          <span class="text-gray-600">Avis d'imposition (manquant)</span>
        </div>
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
          </svg>
          <span class="text-olak-dark">Informations garant</span>
        </div>
      </div>
      
      <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg mt-4">
        <div class="flex items-start">
          <svg class="w-6 h-6 text-blue-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
          </svg>
          <p class="text-blue-800 text-sm">Ajoutez votre avis d'imposition pour compléter votre profil à 100%</p>
        </div>
      </div>
    </div>

    <!-- CV Preview Card -->
    <div class="bg-white rounded-xl shadow-md p-8 mb-6">
      <h2 class="text-2xl font-semibold text-olak-dark mb-6 pb-4 border-b-2 border-olak-primary-light">Aperçu du CV Locatif</h2>
      
      <!-- Personal Information -->
      <div class="mb-6">
        <h3 class="text-xl font-semibold text-olak-primary-dark mb-4 flex items-center gap-2">
          <svg class="w-6 h-6 text-olak-primary" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          Informations Personnelles
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-olak-gray p-4 rounded-lg">
          <div>
            <p class="text-sm text-gray-600 mb-1">Nom complet</p>
            <p class="font-semibold text-olak-dark">Marie MARTIN</p>
          </div>
          <div>
            <p class="text-sm text-gray-600 mb-1">Date de naissance</p>
            <p class="font-semibold text-olak-dark">15/04/1992 (32 ans)</p>
          </div>
          <div>
            <p class="text-sm text-gray-600 mb-1">Email</p>
            <p class="font-semibold text-olak-dark">marie.martin@example.com</p>
          </div>
          <div>
            <p class="text-sm text-gray-600 mb-1">Téléphone</p>
            <p class="font-semibold text-olak-dark">06 12 34 56 78</p>
          </div>
        </div>
      </div>

      <!-- Employment Information -->
      <div class="mb-6">
        <h3 class="text-xl font-semibold text-olak-primary-dark mb-4 flex items-center gap-2">
          <svg class="w-6 h-6 text-olak-primary" fill="currentColor" viewBox="0 0 24 24">
            <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
          </svg>
          Situation Professionnelle
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 bg-olak-gray p-4 rounded-lg">
          <div>
            <p class="text-sm text-gray-600 mb-1">Type de contrat</p>
            <p class="font-semibold text-olak-dark">CDI</p>
          </div>
          <div>
            <p class="text-sm text-gray-600 mb-1">Employeur</p>
            <p class="font-semibold text-olak-dark">Tech Solutions SAS</p>
          </div>
          <div>
            <p class="text-sm text-gray-600 mb-1">Poste</p>
            <p class="font-semibold text-olak-dark">Développeuse Web Senior</p>
          </div>
          <div>
            <p class="text-sm text-gray-600 mb-1">Salaire net mensuel</p>
            <p class="font-semibold text-olak-primary text-lg">2 800 €</p>
          </div>
          <div>
            <p class="text-sm text-gray-600 mb-1">Ancienneté</p>
            <p class="font-semibold text-olak-dark">3 ans 2 mois</p>
          </div>
          <div>
            <p class="text-sm text-gray-600 mb-1">Début du contrat</p>
            <p class="font-semibold text-olak-dark">01/09/2021</p>
          </div>
        </div>
      </div>

      <!-- Guarantor Information -->
      <div class="mb-6">
        <h3 class="text-xl font-semibold text-olak-primary-dark mb-4 flex items-center gap-2">
          <svg class="w-6 h-6 text-olak-primary" fill="currentColor" viewBox="0 0 24 24">
            <path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"/>
          </svg>
          Garant
        </h3>
        <div class="bg-olak-gray p-4 rounded-lg">
          <div class="flex items-center gap-2 mb-3">
            <span class="badge badge-success">Visale</span>
            <span class="text-sm text-gray-600">Garantie Action Logement</span>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <p class="text-sm text-gray-600 mb-1">Numéro Visale</p>
              <p class="font-semibold text-olak-dark">VIS-2024-123456789</p>
            </div>
            <div>
              <p class="text-sm text-gray-600 mb-1">Date d'obtention</p>
              <p class="font-semibold text-olak-dark">10/01/2024</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Documents Summary -->
      <div>
        <h3 class="text-xl font-semibold text-olak-primary-dark mb-4 flex items-center gap-2">
          <svg class="w-6 h-6 text-olak-primary" fill="currentColor" viewBox="0 0 24 24">
            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
          </svg>
          Documents Fournis
        </h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
          <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm font-medium text-gray-700">Pièce d'identité</span>
            </div>
            <span class="badge badge-success text-xs">Validé</span>
          </div>
          <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm font-medium text-gray-700">Contrat de travail</span>
            </div>
            <span class="badge badge-success text-xs">Validé</span>
          </div>
          <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm font-medium text-gray-700">Bulletins de salaire</span>
            </div>
            <span class="badge badge-success text-xs">Validé</span>
          </div>
          <div class="flex items-center justify-between p-3 bg-green-50 rounded-lg">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-olak-success" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm font-medium text-gray-700">Attestation Visale</span>
            </div>
            <span class="badge badge-success text-xs">Validé</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions Section -->
    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
      <h2 class="text-2xl font-semibold text-olak-dark mb-6">Actions</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <!-- Download PDF -->
        <button class="btn-secondary flex items-center justify-center gap-2">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
          </svg>
          Télécharger le CV (PDF)
        </button>

        <!-- Generate Share Link -->
        <button class="btn-primary flex items-center justify-center gap-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
          </svg>
          Générer un lien de partage
        </button>
      </div>

      <!-- Share Link Display (shown when generated) -->
      <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
        <h3 class="text-lg font-semibold text-blue-900 mb-3">Lien de partage actif</h3>
        <p class="text-sm text-blue-800 mb-3">Partagez ce lien avec les propriétaires pour leur permettre de consulter votre CV locatif</p>
        
        <div class="flex gap-2">
          <input 
            type="text" 
            readonly 
            value="https://olak.fr/cv-locatif/a7b3c9d2-e5f8-4a1b-9c3d-6e7f8a9b0c1d" 
            class="input-olak flex-1 bg-white"
            id="shareLink"
          >
          <button class="btn-primary px-6 whitespace-nowrap" onclick="copyShareLink()">
            <svg class="w-5 h-5 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
            </svg>
            Copier
          </button>
        </div>
        
        <div class="mt-3 flex items-start gap-2">
          <svg class="w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
          </svg>
          <div class="text-sm text-blue-700">
            <p class="font-semibold">Ce lien est valable pendant 30 jours</p>
            <p class="text-xs mt-1">Créé le 18/11/2024 - Expire le 18/12/2024</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Help Section -->
    <div class="bg-white rounded-xl shadow-md p-6">
      <h2 class="text-xl font-semibold text-olak-dark mb-4 flex items-center gap-2">
        <svg class="w-6 h-6 text-olak-primary" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
        </svg>
        Comment utiliser votre CV Locatif ?
      </h2>
      <ul class="space-y-2 text-sm text-gray-700">
        <li class="flex items-start gap-2">
          <span class="text-olak-primary font-bold mt-1">1.</span>
          <span>Assurez-vous que votre profil est complet à 100% pour maximiser vos chances</span>
        </li>
        <li class="flex items-start gap-2">
          <span class="text-olak-primary font-bold mt-1">2.</span>
          <span>Générez un lien de partage sécurisé valable 30 jours</span>
        </li>
        <li class="flex items-start gap-2">
          <span class="text-olak-primary font-bold mt-1">3.</span>
          <span>Partagez ce lien avec les propriétaires ou agents immobiliers</span>
        </li>
        <li class="flex items-start gap-2">
          <span class="text-olak-primary font-bold mt-1">4.</span>
          <span>Téléchargez la version PDF pour l'envoyer par email si nécessaire</span>
        </li>
      </ul>
    </div>

  </div>
</div>

<script>
function copyShareLink() {
  const linkInput = document.getElementById('shareLink');
  linkInput.select();
  linkInput.setSelectionRange(0, 99999); // For mobile devices
  
  navigator.clipboard.writeText(linkInput.value).then(() => {
    // Show success feedback (could be replaced with a toast notification)
    const button = event.target.closest('button');
    const originalText = button.innerHTML;
    button.innerHTML = '<svg class="w-5 h-5 inline-block" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg> Copié !';
    
    setTimeout(() => {
      button.innerHTML = originalText;
    }, 2000);
  });
}
</script>